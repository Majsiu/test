<!DOCTYPE html>
<html lang="pl">
<head>
  <!-- Ikonka strony -->
	<link rel="apple-touch-icon" sizes="180x180" href="images/fav/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="images/fav/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="images/fav/favicon-16x16.png">
	<link rel="manifest" href="images/fav/site.webmanifest">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HMI</title>
  <link rel="stylesheet" href="main.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  
    <nav class="navbar">
    <div class="container">
      <!-- Logo -->
      <div class="logo">
        <img src="images/hmilogo.webp" alt="Logo" />
      </div>

      <!-- Desktop Menu -->
      <div class="menu desktop-menu">
        <a href="index.html">Strona główna</a>
        <a href="users.html">Członkowie</a>
        <a href="news.html">Aktualności</a>
        <a href="achievements.html">Osiągnięcia</a>
        <a href="media.html">Social Media</a>
        <a href="kontakt.html">Kontakt</a>
        <a href="en.html"><img src="https://flagcdn.com/w40/gb.png" alt="UK flag" class="flaga"></a>
      </div>

      <!-- Mobile Menu Button -->
      <button id="menu-btn" class="menu-btn">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2"
          viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile Overlay Menu -->
    <div id="mobile-menu" class="mobile-overlay">
      <button id="close-btn" class="close-btn">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2"
          viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      <a href="index.html">Strona główna</a>
        <a href="users.html">Członkowie</a>
        <a href="news.html">Aktualności</a>
        <a href="achievements.html">Osiągnięcia</a>
        <a href="media.html">Social Media</a>
        <a href="kontakt.html">Kontakt</a>
        <a href="en.html"><img src="https://flagcdn.com/w40/gb.png" alt="UK flag" class="flaga"></a>
    </div>
  </nav>

  <script>
    const menuBtn = document.getElementById("menu-btn");
    const closeBtn = document.getElementById("close-btn");
    const mobileMenu = document.getElementById("mobile-menu");

    menuBtn.addEventListener("click", () => {
      mobileMenu.classList.add("active");
    });

    closeBtn.addEventListener("click", () => {
      mobileMenu.classList.remove("active");
    });
  </script>

  <main>
  <div class="articles-header">
            <h1 class="onas">Aktualności</h1>
            <p class="home">Przeglądaj nasze artykuły uporządkowane według daty publikacji</p>
        </div>
        
        <div class="article-controls">
            <button id="sort-date" class="sort-btn">Sortuj według daty</button>
        </div>
        
        <div id="articles-container">
            <div class="loading">Ładowanie listy artykułów...</div>
        </div>
  </main>

  <footer>
    <div class="footer-content">
      <div>Email: hmikolo.umg@gmail.com<br><a href="mailto:hmikolo.umg@gmail.com">Napisz tutaj</a></div>
      <div>O nas<br><a href="index.html">Kliknij tutaj</a></div>
      <div>Kontakt<br><a href="kontakt.html">Kliknij tutaj</a></div>
    </div>
  </footer>

  <script>
        // Funkcja do formatowania daty
        function formatDate(dateStr) {
            const [day, month, year] = dateStr.split('.');
            const months = [
                'stycznia', 'lutego', 'marca', 'kwietnia', 
                'maja', 'czerwca', 'lipca', 'sierpnia',
                'września', 'października', 'listopada', 'grudnia'
            ];
            
            // Usuń wiodące zera z dnia
            const formattedDay = parseInt(day, 10);
            
            return `${formattedDay} ${months[parseInt(month, 10) - 1]} ${year}`;
        }
        
        // Pobierz listę artykułów
        async function loadArticles() {
            try {
                const response = await fetch('articles.json');
                if (!response.ok) {
                    throw new Error('Nie udało się pobrać listy artykułów');
                }
                
                const files = await response.json();
                displayArticles(files);
            } catch (error) {
                console.error('Błąd:', error);
                document.getElementById('articles-container').innerHTML = `
                    <div class="empty-state">
                        <h2>Wystąpił problem z załadowaniem listy artykułów</h2>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Wyświetl artykuły
        function displayArticles(files) {
            const container = document.getElementById('articles-container');
            
            if (files.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h2>Brak dostępnych artykułów</h2>
                        <p>Dodaj artykuły do folderu, aby pojawiły się w archiwum</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            files.forEach(file => {
                // Usuń rozszerzenie .html
                const fileName = file.replace('.html', '');
                
                // Utwórz kartę artykułu
                const articleCard = document.createElement('div');
                articleCard.className = 'article-card';
                
                // Formatuj datę
                const formattedDate = formatDate(fileName);
                
                articleCard.innerHTML = `
                    <div class="article-date">${formattedDate}</div>
                    <a href="articles/${file}" class="article-link">
                        <div class="article-title">Artykuł z dnia ${formattedDate}</div>
                        <div class="article-preview">Kliknij, aby przeczytać pełną treść artykułu opublikowanego w dniu ${formattedDate}</div>
                    </a>
                `;
                
                container.appendChild(articleCard);
            });
            
            // Sortuj domyślnie według daty (od najnowszego)
            sortByDate();
        }
        
        // Funkcja sortowania według daty
        function sortByDate() {
            const container = document.getElementById('articles-container');
            const articles = Array.from(container.children);
            
            articles.sort((a, b) => {
                const dateA = a.querySelector('.article-date').textContent;
                const dateB = b.querySelector('.article-date').textContent;
                
                // Konwersja dat na obiekty Date do porównania
                const [dayA, monthA, yearA] = dateA.split(' ');
                const [dayB, monthB, yearB] = dateB.split(' ');
                
                const months = [
                    'stycznia', 'lutego', 'marca', 'kwietnia', 
                    'maja', 'czerwca', 'lipca', 'sierpnia',
                    'września', 'października', 'listopada', 'grudnia'
                ];
                
                const dateObjA = new Date(`${yearA}-${months.indexOf(monthA)+1}-${dayA}`);
                const dateObjB = new Date(`${yearB}-${months.indexOf(monthB)+1}-${dayB}`);
                
                return dateObjB - dateObjA; // Od najnowszego
            });
            
            container.innerHTML = '';
            articles.forEach(article => container.appendChild(article));
        }
        
        // Funkcja wyszukiwania
        function searchArticles() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const articles = document.querySelectorAll('.article-card');
            
            articles.forEach(article => {
                const title = article.querySelector('.article-title').textContent.toLowerCase();
                const date = article.querySelector('.article-date').textContent.toLowerCase();
                const preview = article.querySelector('.article-preview').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || date.includes(searchTerm) || preview.includes(searchTerm)) {
                    article.style.display = 'block';
                } else {
                    article.style.display = 'none';
                }
            });
        }
        
        // Obsługa zdarzeń
        document.getElementById('sort-date').addEventListener('click', sortByDate);
        document.getElementById('search-input').addEventListener('input', searchArticles);
        
        // Obsługa menu mobilnego
        document.querySelector('.menu-btn').addEventListener('click', function() {
            document.querySelector('.mobile-overlay').classList.add('active');
        });
        
        document.querySelector('.close-btn').addEventListener('click', function() {
            document.querySelector('.mobile-overlay').classList.remove('active');
        });
        
        // Inicjalizacja
        document.addEventListener('DOMContentLoaded', loadArticles);
    </script>

</body>
</html>